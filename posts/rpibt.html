<!DOCTYPE html>
<html>
<head>
  <title> blog | ergh.co </title>
  <link rel="stylesheet" type="text/css" href="../css/main.css">
  <meta name="viewport" content="width=device-width" />
</head>

<body lang="en">
  <div id="navbar">
    <div class="navbar-inner">
      <a class="nav-link brand no-underline" href="../index.html">ERGH.CO</a>
      <div class="nav-links">
        <a class="nav-link nav-left no-underline" href="../blog.html">BLOG</a> <span class="dash nav-center">/</span> <a class="nav-link nav-right no-underline" href="../about.html">ME</a>
      </div>
    </div>
  </div>

  <div id="content" class="blog">
    <p class="intro-title"> That Time I Wanted a Bluetooth Media Player </p>
    <hr />
    <p class="post">
      <b>Goal:</b>
      To make a bluetooth media player interface that would be as easy to use as any portable speaker is today. I wanted to leave my Pi plugged in to the wall on one end and speakers on the other. It would always be on, waiting for a connection. Once connected, it plays whatever comes out of your phone.
      <b>Part 1</b> <i>or: how I learned that bluetooth is awful</i>
      Starting ambitiously, I figured I could do it all in shell. Hey, I've been meaning to get practice in shell, why not now? That ground to a halt once I actually got a bit further in... Turns out, bluetooth is a much more complicated thing than I had previously thought. I mean, you just switch it to on using your phone, your devices show up, you tap on a device, it connects. Well, somebody configured it that way to make it easy. It was up to me to try and do the same thing! Documentation was sparse, as it turns out, nobody has done this in the last 3 years. If you didn't know, 3 years ago, there was something called `bluez-simple-agent` that doesn't seem to work anymore. (It was part of an older version of Bluez, as I found out about 2 hours later)      
      <b>Part 2</b> <i>or: how learned that bluetooth isn't that awful</i>
      Having worked my way around those issues, I got on to connecting to my phone. That was easy. A bit of `bluetoothctl` ~~direction following~~ magic. I used these commands to get a single connection at first:
    </p>
    <div class="code">
        power on<br />
        scan on<br />
        agent on<br />
        default-agent<br />
        pairable on<br />
        # during the scan step, you'll see your device listed, copy the MAC address.<br />
        # It'll look like: xx:xx:xx:xx:xx:xx<br />
        pair xx:xx:xx:xx:xx:xx<br />
        trust xx:xx:xx:xx:xx:xx<br /> 
        connect xx:xx:xx:xx:xx:xx
    </div>
    <p class="post">
        So, now we have a one-time-only connection to the Pi via bluetooth that transmits audio! Useful, eh? No, not really. I intend on using this with plenty of friends, not just a list of trusted devices.
    </p>
    <p class="post">
      <b>Part 3</b> <i>or: how Python became my hopeful saviour (like it always is)</i>
      At this point, I'd given up on the idea that I could accomplish this with a series of Shell scripts. It was time to break out python, as happens in all of my interesting projects. There is a cool python library called, get this, `bluetooth`! My problem was that I wanted it to be as simple as a commercial bluetooth speaker. As in, you tap on the device on your phone's bluetooth list and it connects. That would be a bit more difficult.
      <b>Part 4</b> <i>or: giving up because something better happened</i>
      This project has since been abandoned becuase I got gifted an Amazon Echo Dot! I'm still interested in doing this at some point.
      </p>
  </div>
<script src="../js/script.js"> </script>
</body>
</html>
